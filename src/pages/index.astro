---
import {getCollection} from 'astro:content';
import {Image} from '@astrojs/image/components';
import Layout from '../layouts/Layout.astro';
import {get} from './api/articles';
import type {Article} from '../utils/article.type';
import ProjectCard from '../components/ProjectCard.astro';
import ArticleCard from '../components/ArticleCard.astro';
import profilePic from '../images/profile.webp';

const {articles} = await (await get()).json();
const projects = (await getCollection('projects'))
  .sort((a, b) => b.data.date - a.data.date)
  .slice(0, 3);
---

<Layout title="Matteo Gassend">
  <div class="w-full flex flex-col md:flex-row h-full">
    <div
      class="order-last sticky z-10 md:z-0 bottom-0 md:relative md:order-first md:w-1/3 md:h-full shadow-md pl-0 md:pl-2"
    >
      <nav class="md:hidden"></nav>
      <nav class="hidden md:block sticky top-0">
        <ul class="flex flex-col">
          <li class="menu__item"><a href="#about">About Me</a></li>
          <li class="menu__item"><a href="#projects">Projects</a></li>
          <li class="menu__item"><a href="#skills">Skills</a></li>
          <li class="menu__item"><a href="#experience">Experience</a></li>
          <li class="menu__item"><a href="#education">Education</a></li>
          <li class="menu__item">
            <a href="#certifications">Certifications</a>
          </li>
          <li class="menu__item"><a href="#contacts">Contacts</a></li>
        </ul>
      </nav>
    </div>
    <div class="w-full pl-2">
      <section id="about">
        <div class="flex flex-col md:flex-row items-center justify-evenly mt-3">
          <h1 class="text-3xl">Hello, my name is <b>Matteo</b></h1>
          <Image
            loading="eager"
            src={profilePic}
            alt="matteo gassend"
            height={500}
            aspectRatio={1.33}
            class="order-first md:order-last rounded-full h-80 w-auto grayscale hover:grayscale-0 transition-all duration-200"
          />
        </div>
        <p>
          I am a fullstack developer with {new Date().getFullYear() - 2018} years
          of experience in the industry.
        </p>
        <p>
          I have a passion for creating innovative and efficient solutions using
          the latest technologies.
        </p><p>
          My expertise includes all things related to:
          <ul class="list-disc">
            <li>Javascript</li>
            <li>HTML/CSS</li>
            <li>Python</li>
            <li>Relational (and not) Databases</li>
          </ul>
          and I have experience working on a variety of projects, from [examples
          of types of projects you've worked on].
        </p>
      </section>
      <section id="projects">
        <h2 class="text-center font-bold text-2xl">Look ma, I made this!</h2>
        <div
          class="w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
        >
          {projects.map((e) => <ProjectCard project={e} />)}
        </div>
        <div class="flex justify-center w-full">
          <a rel="prefetch" href="/projects">See More</a>
        </div>
      </section>
      <section id="articles">
        <h2 class="text-center font-bold text-2xl">Look ma, I wrote this!</h2>
        {articles.map((e: Article) => <ArticleCard article={e} />)}
      </section>
    </div>
  </div>
</Layout>

<style>
  .menu__item {
    @apply px-2 py-3 hover:-translate-y-2 transform transition-all hover:shadow-md;
  }
</style>
