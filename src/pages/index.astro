---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import { get } from "./api/articles";
import type { Article } from "../utils/article.type";
import ProjectCard from "../components/ProjectCard.astro";
import ArticleCard from "../components/ArticleCard.astro";
import EducationCard from "../components/EducationCard.astro";
import ExpCard from "../components/ExpCard.astro";
import ContactCard from "../components/ContactCard.astro";
import { Icon } from "astro-icon";
import { Image } from "astro:assets";
import profilePic from "../assets/profile.jpg";
import skills from "../utils/skills.json";
import { contact } from "../utils/data.json";

const { articles }: { articles: Article[] } = await (await get()).json();
const projects = (await getCollection("projects")).sort(
  (a, b) => b.data.date - a.data.date
);

const education = (await getCollection("education"))
  .sort((a, b) => b.data.graduation - a.data.graduation)
  .slice(0, 3);
const experiences = (await getCollection("experience")).sort(
  (a, b) => b.data.begin - a.data.begin
);
---

<Layout title="Matteo Gassend">
  <section id="hero" class="flex flex-col">
    <div class="flex">
      <div class="flex flex-col w-full p-6">
        <h1 class="uppercase font-bold text-[150px] leading-none">
          matteo <br /><span class="font-normal text-[120px] tracking-[2px]"
            >gassend</span
          >
        </h1>
        <h3>
          I am a fullstack developer with 3 years of experience. I leverage web
          technologies to build web, mobile and desktop applications.
        </h3>
        <div class="self-end place-self-end flex w-full">&darr;</div>
      </div>
      <div
        class="w-full min-h-full bg-[#374053] flex items-end justify-end p-6"
      >
        <p
          class="uppercase text-white opacity-20 text-[95px] font-bold leading-[0.8]"
        >
          <span class="pr-2">fullstack</span><br />developer<span
            class="font-normal">_</span
          >
        </p>
      </div>
    </div>
    <div class="w-full font-bold text-center">
      <h3 class="uppercase">
        in love with new technologies<br />and creating the best<br />performing
        user experience
      </h3>
    </div>
  </section>
  <section id="about" class="p-6">
    <p class="capitalize">About_</p>
    <p class="font-bold uppercase">a fullstack developer with hobbies</p>
    <div class="flex justify-between flex-col md:flex-row">
      <div class="w-full">
        <p>
          Iâ€™m born in Florence 1999.02.05. Mission-driven full stack developer
          with a passion for thoughtful UI design, collaboration, and teaching.
          I love making side projects to improve on an existing skill or
          learning a new one, because there is always something else to be
          learned. As a web developer, I enjoy using my obsessive attention to
          detail, my unequivocal love for making things, and my mission-driven
          work ethic to literally change the world.
        </p>
      </div>
      <div class="w-full flex justify-end">
        <Image class="w-full md:w-1/2 h-auto" src={profilePic} alt="me" />
      </div>
    </div>
    <p class="section-header">Me_</p>
    <p class="font-bold uppercase mb-2">all you need to know</p>
    <a class="capitalize p-2 border-2 border-black">my CV &rarr;</a>
  </section>
  <section id="projects" class="p-6">
    <p class="section-header">Projects_</p>
    <p class="section-title">Projects</p>
    <p>I built these</p>
    <div
      class="flex overflow-x-auto gap-4 scrollbar-thin scrollbar-track-black scrollbar-thumb-amber-500"
    >
      {
        projects.map((project) => (
          <div class="w-full h-full">
            <ProjectCard project={project} />
          </div>
        ))
      }
    </div>
  </section>
  <section id="work" class="p-6">
    <p class="section-header">Work_</p>
    <p class="section-title">This is where I worked</p>
    <div
      class="flex overflow-x-auto gap-4 scrollbar-thin scrollbar-track-black scrollbar-thumb-amber-500"
    >
      {
        experiences.map((experience, index) => (
          <div class="w-full h-full">
            <ExpCard experience={experience} index={index + 1} />
          </div>
        ))
      }
    </div>
  </section>
  <section id="skills" class="bg-[#878C97] bg-opacity-40 p-6">
    <p class="section-title">how i do it</p>
    <p class="section-heaeder">Skills, systems & tools oh my</p>
    <div class="w-full flex justify-evenly">
      {
        Object.entries(skills).map(([category, list]) => (
          <div>
            <p class="text-[23px] font-bold capitalize">
              {category}
              <span class="font-normal">_</span>
            </p>
            <ul>
              {list.map((skill) => (
                <li class="capitalize">{skill}</li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>
  </section>
  <section class="p-6" id="blog">
    <p class="section-header">Blog <span class="font-normal">_</span></p>
    <p class="section-title">sometimes I write</p>
    <div class="flex w-full gap-4">
      {articles.slice(0, 3).map((article) => <ArticleCard article={article} />)}
    </div>
    <div class="text-center">
      <a
        href="https://blog.matteogassend.com"
        target="_blank"
        rel="noreferrer"
        class="font-bold text-[35px]">Read More Articles</a
      >
    </div>
  </section>
  <section class="p-6" id="education">
    <p class="section-header">education<span class="font-normal">_</span></p>
    <p class="section-title">here's where I studied</p>
    <div
      class="flex overflow-x-auto gap-4 scrollbar-thin scrollbar-track-black scrollbar-thumb-amber-500"
    >
      {
        education.map((education, index) => (
          <div class="w-full h-full">
            <EducationCard education={education} index={index + 1} />
          </div>
        ))
      }
    </div>
  </section>
  <section class="p-6" id="contact">
    <p class="section-header">reach out<span class="font-normal">_</span></p>
    <p class="section-title">get in touch</p>
    <div class="flex flex-col">
      <a href={`mailto:${contact.email}`} class="text-[80px] text-[#A1A1A2]"
        >{contact.email}</a
      >
      <a
        href={`tel:${contact.phone.replace(/\s+/g, "")}`}
        class="font-bold text-[35px]">{contact.phone}</a
      >
    </div>
    <p class="text-[20px]">I'll get in touch ASAP, I promise</p>
  </section>
</Layout>

<style>
  .section-header {
    @apply text-[23px] text-[#6B6B6B] capitalize;
  }
  .section-title {
    @apply text-[80px] font-bold uppercase;
  }
</style>
